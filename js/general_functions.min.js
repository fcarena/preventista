function showBusy(a,b){$("#"+b).fadeOut("fast",function(){$("#"+a).fadeIn("fast")})}function hideBusy(a,b){$("#"+b).fadeOut("fast",function(){$("#"+a).fadeIn("slow")})}function processForm(a,b){window.setTimeout(function(){hideBusy("errors","busy");if(a.indexOf("field")==-1){$("#"+b[0]).html(a)}else{$("#"+b[1]).html(a)}},200)}function submitData(a,b){$("#"+a).submit(function(){$.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),beforeSend:function(){showBusy("busy","errors")},success:function(c){processForm(c,b)}});return false})}function submitData2(a,b){$.ajax({type:"POST",url:$("#"+a).attr("action"),data:$("#"+a).serialize(),beforeSend:function(){showBusy("busy","errors")},success:function(c){processForm(c,b)}})}function submitData3(e,d,a,c,b){$("#"+e).submit(function(){$.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),success:function(f){$("#"+d).html(f)}});return false})}function loadPage(b,a){showFlash("Cargando...",5);$("#"+a).load(b,function(){$.alert.closeLoading("Listo...",1)}).fadeIn("slow")}function loadPageEdit(b,a){if($("#id123").val()){showFlash("Cargando...",5);b=b+$("#id123").val();$("#"+a).load(b,function(){$.alert.closeLoading("Listo...",1)}).fadeIn("slow")}else{showAleatoryMessage("Por favor selecciona un registro!")}}function loadPageDelete(b,a,d){var c=new Array();$.each($("input[name='chkLote']:checked"),function(){c.push($(this).val())});if(c.length>0){if(!d){d="¿Estas seguro de eliminar los items seleccionados?"}jConfirm(d,"Mensaje de confirmación",function(e){if(e){$.post(b,{arrkeys:c},function(f){$("#"+a).html(f).fadeIn("slow")})}})}else{showAleatoryMessage("Selecciona un registro!")}}function loadPageChk(c,b,e,a){var d=new Array();$.each($("input[name="+a+"]:checked"),function(){d.push($(this).val())});if(d.length>0){$.post(c,{arrkeys:d},function(f){$("#"+b).html(f).fadeIn("slow")})}else{showAleatoryMessage("Selecciona al menos un registro!")}}function deleteData(b,a,c){jConfirm(c,"Mensaje de confirmación",function(d){if(d){$.post(b,function(e){$("#"+a).html(e).fadeIn("slow")})}})}function showAleatoryMessage(a){jAlert(a,"Mensaje de Alerta")}function showFlash(b,a){switch(a){case 1:$.alert(b);break;case 2:$.alert(b,{width:400,height:30,nameClass:"flash-error",nameId:"flash-error",time:1500});break;case 3:$.alert(b,{width:400,height:30,nameClass:"flash-alert",nameId:"flash-alert",time:1500});break;case 4:$.alert(b,{width:400,height:30,nameClass:"flash-info",nameId:"flash-info",time:1500});break;case 5:$.alert(b,{width:400,height:30,nameClass:"flash-loading",nameId:"flash-loading",time:1500,permanent:1});break;case 6:$.alert(b,{width:400,height:30,nameClass:"flash-loading",nameId:"flash-loading",time:1,permanent:0});break;default:break}}function setPagination(b,a){$("div.pagination a").click(function(c){c.preventDefault();$("#"+a).load(b+$(this).attr("href"))})}function setPaginationTwo(c,a,b){$("div.pagination a").click(function(d){d.preventDefault();$.ajax({type:"POST",url:c+$(this).attr("href"),data:$("#"+b).serialize(),success:function(e){$("#"+a).html(e)}})})}function showBoxImageUser(b,a){$("#"+b).colorbox({href:a,width:"50%",height:"50%",iframe:true,transition:"none",opacity:0.8,close:"Cerrar"})}function setDatePicker(b){for(var a=0;a<b.length;a++){$("#"+b[a]).datepicker({autoSize:true,gotoCurrent:true,changeYear:true,changeMonth:true,closeText:"X"})}}function setDatePickerTwo(b){for(var a=0;a<b.length;a++){$("#"+b[a]).datepicker({autoSize:true,gotoCurrent:true,changeYear:true,changeMonth:true,minDate:new Date(),closeText:"X"})}}function resultUpload(d,a,c){if(d==0){var b="El Archivo "+c+" se ha subido correctamente al servidor";$("#linkContinue").attr("onClick","loadPage('"+a+"','result-list-detail')");$("#btnContinue").removeAttr("disabled")}if(d==1){var b="Error ! - Error al cargar el archivo "+c+" <br><a href='#' onClick=\"loadPage('"+a+"','right-content')\"> Intentar de nuevo</a>"}$("#formUpload").html(b)}function addItemToSelect(b,c){var a="";a=$("#"+b.idSelectNoAssing).val()||[];if($("#"+c.mainSelect).val()!="0"){if(a!=""){$.post(b.url_set,{id:$("#"+c.mainSelect).val(),arr_items_id:a},function(d){if(d[0]["estado"]==true){getAllItems(c)}else{alert("Imposible realizar la operación")}},"json")}else{alert("Debes seleccionar alguna opción")}}else{alert("Debes seleccionar "+b.msg)}}function quitItemToSelect(b,c){var a="";a=$("#"+b.idSelectNoAssing).val()||[];if($("#"+c.mainSelect).val()!="0"){if(a!=""){$.post(b.url_quit,{id:$("#"+c.mainSelect).val(),arr_items_id:a},function(d){if(d[0]["estado"]==true){getAllItems(c)}},"json")}else{alert("Debes seleccionar alguna opción de menu")}}else{alert("Debes seleccionar "+options2.msg)}}function getAllItems(a){$.post(a.url,{id:$("#"+a.mainSelect).val()},function(b){var d="";var c="";$.each(b,function(e,f){if(f.elemento.cod==1){d+='<option value = "'+f.elemento[a.fieldId]+'">'+f.elemento[a.fieldDescription]+"</option>"}else{c+='<option value = "'+f.elemento[a.fieldId]+'">'+f.elemento[a.fieldDescription]+"</option>"}});$("#"+a.idSelectAssing).empty();$("#"+a.idSelectAssing).html(d);$("#"+a.idSelectNoAssing).empty();$("#"+a.idSelectNoAssing).html(c)},"json")}function getTabs(a){$("#"+a).tabs({ajaxOptions:{cache:false,error:function(e,b,d,c){$(c.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible. ")}}})}function getHoverTable(c,b,a){$("#"+c+" tr").click(function(){var d=$(this);$.post(b,{param:d.attr("id")},function(e){$("#"+c).find("tr").removeClass("hover");d.addClass("hover");$("#"+a).html(e)})})}function getHoverTableTwo(a,b){$("#"+a+" tbody tr").click(function(){var c=$(this);$("#"+a).find("tr").removeClass("hover");c.addClass("hover");if(!b){$("#id123").val(c.find("td").eq(1).html())}else{$("#id123").val(c.find("td").eq(b).html())}})}function getModalWindow(b,a,d,c){$.modal("",{width:d,height:c,nameClass:"modal-window",nameId:"modal-window",title:a,url:b})}function getModalWindowAdvancedOne(c,a,f,d,b){var e=new Array();$.each($("input[name="+b+"]:checked"),function(){e.push($(this).val())});if(e.length>0){$.modal("",{width:f,height:d,nameClass:"modal-window",nameId:"modal-window",title:a,url:c+e})}else{showAleatoryMessage("Selecciona al menos un registro!")}}function getModalWindowAdvancedTwo(j,d,b,e,c,g,a){var f=new Array();$.each($("input[name="+c+"]:checked"),function(){f.push($(this).val())});if(f.length>0){$("#"+j).load(d+f).dialog({width:b,height:e,title:a,modal:true})}else{showAleatoryMessage("Selecciona al menos un registro!")}}function closeModalWindows(){$.modal.close()}function autocomplete(e,b,d,c,a){$("#"+e).autocomplete(b,{width:300,matchContains:true,autoFill:true,selectFirst:true,delay:0,extraParams:{valExtraParam:function(){if($("#"+c).val()){return $("#"+c).val()}else{return"NO"}},nameExtraParam:function(){return $("#"+c).attr("id")},model:d,nameFieldToSearch:function(){return $("#"+e).attr("id")},arrFieldToShow:function(){return serialize(a)}}}).result(function(h,g){for(var f=0;f<a.length;f++){$("#"+a[f]).val(g[f+1])}})}function autocompleteTwo(f,c,e,d,b,a){$("#"+f).autocomplete(c,{width:300,selectFirst:true,delay:0,extraParams:{valExtraParam:function(){if($("#"+d).val()){return $("#"+d).val()}else{return"NO"}},nameExtraParam:function(){return $("#"+d).attr("id")},model:e,nameFieldToSearch:a,arrFieldToShow:function(){return serialize(b)}}}).result(function(j,h){for(var g=0;g<b.length;g++){$("#"+b[g]).val(h[g+1])}})}function format(a){}function serialize(a){var b="a:"+a.length+":{";for(i=0;i<a.length;i++){b+="i:"+i+";s:"+a[i].length+':"'+a[i]+'";'}b+="}";return b}function activarFlashRegisterUser(a){$("#"+a).css("display","block")}function selectAllChks(b,a){$("input[name="+b+"]").change(function(){$("input[name="+a+"]").each(function(){if($("input[name="+b+"]:checked").length==1){this.checked=true}else{this.checked=false}})})}function getPrecio(a,c){var b=$("#"+a).val();if(b==1){$("#articulos_precio-"+c).attr("id","articulos_precio1-"+c);$("#articulos_precio1-"+c).attr("name","articulos_precio1-"+c);return"articulos_precio1-"+c}else{if(b==2){$("#articulos_precio-"+c).attr("id","articulos_precio2-"+c);$("#articulos_precio2-"+c).attr("name","articulos_precio2-"+c);return"articulos_precio2-"+c}else{$("#articulos_precio-"+c).attr("id","articulos_precio3-"+c);$("#articulos_precio3-"+c).attr("name","articulos_precio3-"+c);return"articulos_precio3-"+c}}}function getSubtotal(a,c){var b=$("#"+a).val();var d="Stock no disponible";var e=$("#articulos_stockreal-"+c).val()-$("#pedidodetalle_cantidad-"+c).val();if(b==1){if(e>=0){if($("#pedidodetalle_montoacordado-"+c).val()!=""){$("#pedidodetalle_subtotal-"+c).val(($("#pedidodetalle_montoacordado-"+c).val()*$("#pedidodetalle_cantidad-"+c).val()).toFixed(2))}else{$("#pedidodetalle_subtotal-"+c).val(($("#articulos_precio1-"+c).val()*$("#pedidodetalle_cantidad-"+c).val()).toFixed(2))}getTotal()}else{alert(d);$("#pedidodetalle_cantidad-"+c).focus()}}else{if(b==2){if(e>=0){if($("#pedidodetalle_montoacordado-"+c).val()!=""){$("#pedidodetalle_subtotal-"+c).val(($("#pedidodetalle_montoacordado-"+c).val()*$("#pedidodetalle_cantidad-"+c).val()).toFixed(2))}else{$("#pedidodetalle_subtotal-"+c).val(($("#articulos_precio2-"+c).val()*$("#pedidodetalle_cantidad-"+c).val()).toFixed(2))}getTotal()}else{alert(d);$("#pedidodetalle_cantidad-"+c).focus()}}else{if(e>=0){if($("#pedidodetalle_montoacordado-"+c).val()!=""){$("#pedidodetalle_subtotal-"+c).val(($("#pedidodetalle_montoacordado-"+c).val()*$("#pedidodetalle_cantidad-"+c).val()).toFixed(2))}else{$("#pedidodetalle_subtotal-"+c).val(($("#articulos_precio3-"+c).val()*$("#pedidodetalle_cantidad-"+c).val()).toFixed(2))}getTotal()}else{alert(d);$("#pedidodetalle_cantidad-"+c).focus()}}}}function getSubtotal2(a){$("#comprasdetalle_subtotal-"+a).val(($("#articulos_preciocompra-"+a).val()*$("#comprasdetalle_cantidad-"+a).val()).toFixed(2));getTotal2()}function getTotal2(){var a=0;$("#lineascampos input[name^=comprasdetalle_subtotal-]").each(function(c,b){if($(b).val()!=""){a=parseFloat(a)+parseFloat($(b).val())}});$("#compras_montototal").val(a.toFixed(2))}function getTotal(){var a=0;$("#lineascampos input[name^=pedidodetalle_subtotal-]").each(function(c,b){if($(b).val()!=""){a=parseFloat(a)+parseFloat($(b).val())}});$("#peididos_montototal").val(a.toFixed(2))}function getR(c,b){var a=false;if($(c).val()!=""){b=b+$(c).val();$.get(b,function(e){var d=false;$("select[id=marcas_id]").each(function(g,f){if($(c).val()==$(f).val()){d=true}else{if(d){$(f).remove()}}});$("select[id=marcas_id]").each(function(g,f){if($(c).val()==$(f).val()){$(e).insertAfter(c)}})})}else{$("select[id=marcas_id]").each(function(e,d){if(a){$(d).remove()}else{if($(c).val()==$(d).val()){a=true}}})}}function checkRepeatArticle(c,b){if($(c).val()!=""){var a=0;$("#lineascampos input[name^=articulos_descripcion-]").each(function(e,d){if($("#articulos_descripcion-"+b).val()==$(d).val()){a++}});if(a>1){if(confirm("El articulo ya ha sido ingresado. ¿Desea eliminarlo?")){$("#lineascampos table tr[id="+b+"] td input").val("");$(c).focus()}else{$("#lineascampos table tr[id="+b+"] td input[name$=_cantidad-"+b+"]").focus()}}else{$("#lineascampos table tr[id="+b+"] td input[name$=_cantidad-"+b+"]").focus()}}}function updateParcial(g,b){var j=new Array();var e=new Array();var f=new Array();var h=new Array();var n=new Array();var m=new Array();var l=new Array();var k=new Array();var d=new Array();var c=new Array();var a=new Array();$.each($("input[name="+g+"]:checked"),function(){j.push($(this).val());e.push($("#result-set tbody tr[id="+$(this).val()+"] td input[name^=articulos_stockreal-]").val());f.push($("#result-set tbody tr[id="+$(this).val()+"] td input[name^=articulos_stockrealviejo-]").val());h.push($("#result-set tbody tr[id="+$(this).val()+"] td input[name^=chdirect_comment-]").val());n.push($("#result-set tbody tr[id="+$(this).val()+"] td input[name^=articulos_preciocompra-]").val());m.push($("#result-set tbody tr[id="+$(this).val()+"] td input[name^=articulos_precio1-]").val());l.push($("#result-set tbody tr[id="+$(this).val()+"] td input[name^=articulos_precio2-]").val());k.push($("#result-set tbody tr[id="+$(this).val()+"] td input[name^=articulos_precio3-]").val());d.push($("#result-set tbody tr[id="+$(this).val()+"] td input[name^=articulos_porcentaje1-]").val());c.push($("#result-set tbody tr[id="+$(this).val()+"] td input[name^=articulos_porcentaje2-]").val());a.push($("#result-set tbody tr[id="+$(this).val()+"] td input[name^=articulos_porcentaje3-]").val())});if(j.length>0){showFlash("Registrando...",5);$.get(b,{"art_ids[]":j,"art_sts[]":e,"art_stsv[]":f,"comments[]":h,"art_pcs[]":n,"art_pv1[]":m,"art_pv2[]":l,"art_pv3[]":k,"art_p1[]":d,"art_p2[]":c,"art_p3[]":a},function(o){$.alert.closeLoading("Listo...",1);$("#right-content").html(o)})}}function calcPrice(c,b){var a=parseFloat($("#articulos_preciocompra-"+c).val());var f=parseFloat($("#articulos_porcentaje1-"+c).val());var e=parseFloat($("#articulos_porcentaje2-"+c).val());var d=parseFloat($("#articulos_porcentaje3-"+c).val());$("#articulos_precio1-"+c).val((a+((a*f)/100)).toFixed(2));$("#articulos_precio2-"+c).val((a+((a*e)/100)).toFixed(2));$("#articulos_precio3-"+c).val((a+((a*d)/100)).toFixed(2))}function calcPriceAdvanced(d,m,l,j,g,f,e){var k=parseFloat($("#"+m+"-"+d).val());var c=parseFloat($("#"+g+"-"+d).val());var b=parseFloat($("#"+f+"-"+d).val());var a=parseFloat($("#"+e+"-"+d).val());var h=k/((c/100)+1);$("#articulos_preciocompra-"+d).val(h.toFixed(2));$("#"+l+"-"+d).val((h+((h*b)/100)).toFixed(2));$("#"+j+"-"+d).val((h+((h*a)/100)).toFixed(2))}function calcPriceSimple(c,a){if($("#articulos_preciocompra").val()!=""){var b=parseFloat($("#articulos_preciocompra").val());var d=parseFloat(c);$("#"+a).val((b+((b*d)/100)).toFixed(2))}else{alert("Complete PC");$("#articulos_preciocompra").focus()}}function calcPriceSimple2(b){if(b!=""){var a=parseFloat(b);var e=parseFloat($("#articulos_porcentaje1").val());var d=parseFloat($("#articulos_porcentaje2").val());var c=parseFloat($("#articulos_porcentaje3").val());$("#articulos_precio1").val((a+((a*e)/100)).toFixed(2));$("#articulos_precio2").val((a+((a*d)/100)).toFixed(2));$("#articulos_precio3").val((a+((a*c)/100)).toFixed(2))}else{alert("Complete PC");$("#articulos_preciocompra").focus()}}function check(a){$("#result-set tbody tr[id="+a+"] td input[type=checkbox]").attr("checked","true")}function dialogUp(e,a,d,b,c){if(b!=""){$("#"+e).load(b).dialog({width:a,height:d,modal:true,title:c,close:function(f,g){$(this).dialog("destroy")}})}else{$("#"+e).dialog({width:a,height:d,modal:true,close:function(f,g){$(this).dialog("destroy")}})}}function showModalCC(e,a,d,b,c){$("#"+e).load(b).dialog({width:a,height:d,modal:true,title:c,close:function(f,g){$("#"+e).dialog("destroy")}})}function dialogUpToComment(d,a,c,b){$("#"+d).dialog({width:a,height:c,modal:true,beforeClose:function(e,f){if($("#tcomment-"+b).val()!=""){$("#chdirect_comment-"+b).val($("#tcomment-"+b).val())}else{$("#chdirect_comment-"+b).val("N")}}})}function getOneMarcaToSearch(){var a=new Array();var b=new Array();$(".searchShort  select[name^=marcas_id]").each(function(d,c){b.push($(c).val())});if(b.length>0){for(i=0;i<b.length;i++){if(b[i]==""){a.push(true)}}if(a.length>0){marcatosearch=b[b.length-2]}else{marcatosearch=b[b.length-1]}return marcatosearch}else{return""}}function setTimeToRun(a){var b=new Array();$.each($("#result-set tbody input[type=text]"),function(){if(this.value!=this.defaultValue){b.push($(this).val())}});if(b.length>0){setTimeout("updateParcial('chkArticulos','"+a+"')",5000)}}function setComment(a){if($("#articulos_stockreal-"+a).attr("value")==$("#articulos_stockreal-"+a).prop("defaultValue")){$("#chdirect_comment-"+a).val("F");$("#acomment-"+a).remove();$("#comment-"+a).remove()}else{$("#chdirect_comment-"+a).val("N");if(!$("#acomment-"+a).length){$("<a href='#' id='acomment-"+a+"' onclick=\"dialogUpToComment('comment-"+a+"',250,150,"+a+")\">+</a><div id='comment-"+a+"' title='Cambio directo | Comentario'><textarea name='tcomment-"+a+"' id='tcomment-"+a+"' style='width:98%; height:90%;'></textarea></div>").insertAfter($("#articulos_stockreal-"+a));$("#comment-"+a).css("display","none")}}}function getHistoricChgDirect(a){$("#historicalChgs").load(a).dialog({modal:true,width:400,height:500})}function calcTotalEvaluacion(){var b=new Array();var g=new Array();var f=new Array();var a=0;var c=0;var e=0;$.each($("input[name^=monto_recibido]"),function(){if($(this).val()!=""){b.push($(this).val())}});$.each($("input[name^=gmontos]"),function(){g.push($(this).val())});$.each($("input[name^=pmontos]"),function(){f.push($(this).val())});if(b.length>0){for(var d=0;d<b.length;d++){a+=parseFloat(b[d])}}if(g.length>0){for(var d=0;d<g.length;d++){c+=parseFloat(g[d])}}if(f.length>0){for(var d=0;d<f.length;d++){e+=parseFloat(f[d])}}$("#spIngreso").text(a+e);$("#spGastos").text(c);$("#spTotal").text((a+e)-c)};